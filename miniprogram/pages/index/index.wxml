<!--index.wxml-->
<scroll-view class="scrollarea" scroll-y type="list" bindscrolltolower="onReachBottom">
  <view class="container">

    

    <!-- æ¨èæ¼”å‡º -->
    <view class="recommended-section">
      <view class="section-header">
        <text class="section-title">çƒ­é—¨æ¼”å‡º</text>
        <text class="section-more" bindtap="goToConcerts">æŸ¥çœ‹æ›´å¤š</text>
      </view>
      
      <view class="concert-list">
        <view wx:for="{{recommendedConcerts}}" wx:key="_id" class="concert-item" bindtap="goToConcertDetail" data-id="{{item._id}}">
          <image src="{{item.poster}}" class="concert-poster" mode="aspectFill"></image>
          <view class="concert-info">
            <text class="concert-title">{{item.title}}</text>
            <text class="concert-date">{{item.dateFormatted}}</text>
            <text class="concert-venue">{{item.venue}}</text>
          </view>
        </view>
      </view>
    </view>

    <!-- ç¤¾åŒºçƒ­å¸– -->
    <view class="feed-section">
      <view class="section-header">
        <text class="section-title">ç¤¾åŒºçƒ­å¸–</text>
      </view>
      <view class="feed-list">
        <view wx:for="{{posts}}" wx:key="_id" class="post-card" bindtap="onPostTap" data-id="{{item._id}}">
          <view class="post-header">
            <image class="avatar" src="{{item.userAvatar}}"></image>
            <view class="meta">
              <text class="name">{{item.userName}}</text>
              <text class="time">{{item.timeFormatted}}</text>
            </view>
          </view>
          <view class="post-content">
            <text class="content">{{item.content}}</text>
          </view>
          <view class="post-images" wx:if="{{item.images && item.images.length > 0}}">
            <image wx:for="{{item.images}}" wx:key="*this" src="{{item}}" class="post-image" mode="aspectFill"></image>
          </view>
          <view class="post-actions">
            <view class="action" bindtap="onLikePost" data-id="{{item._id}}">
              <text class="icon">{{item.isLiked ? 'â™¥' : 'â™¡'}}</text>
              <text class="count">{{item.likes}}</text>
            </view>
            <view class="action">
              <text class="icon">ğŸ’¬</text>
              <text class="count">{{item.comments}}</text>
            </view>
          </view>
        </view>
      </view>
    </view>

    <!-- ç”¨æˆ·å¼•å¯¼ -->
    <view class="guide-section" wx:if="{{!hasUserInfo}}">
      <view class="guide-content">
        <text class="guide-title">å¼€å§‹ä½ çš„æ‘‡æ»šä¹‹æ—…</text>
        <text class="guide-desc">ç™»å½•åå¯ä»¥å‘ç°æ›´å¤šç²¾å½©çš„æ‘‡æ»šæ¼”å‡º</text>
        <button class="guide-btn" bindtap="goToProfile">ç«‹å³ç™»å½•</button>
      </view>
    </view>
  </view>
</scroll-view>
