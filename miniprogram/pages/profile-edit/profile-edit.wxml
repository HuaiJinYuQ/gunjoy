<view class="container">
  <view class="form-section">
    <view class="form-item avatar-item">
      <text class="label">头像</text>
      <view class="avatar-row">
        <image class="avatar avatar--md" mode="aspectFill" src="{{form.avatarUrl || '../../images/head.png'}}"></image>
        <button class="btn" open-type="chooseAvatar" bindchooseavatar="onChooseAvatar">更换</button>
      </view>
    </view>

    <view class="form-item">
      <text class="label">昵称</text>
      <input class="input" type="nickname" value="{{form.nickname}}" bindinput="onInput" data-key="nickname" placeholder="请输入昵称" />
    </view>

    <view class="form-item">
      <text class="label">性别</text>
      <view class="radio-row">
        <label class="radio" wx:for="{{genders}}" wx:key="value" bindtap="onGenderSelect" data-value="{{item.value}}">
          <view class="radio-dot {{form.gender === item.value ? 'active' : ''}}"></view>
          <text>{{item.label}}</text>
        </label>
      </view>
    </view>

    <view class="form-item">
      <text class="label">生日</text>
      <picker mode="date" value="{{form.birthday || '2000-01-01'}}" bindchange="onBirthdayChange">
        <view class="picker-value">{{form.birthday || '请选择生日'}}</view>
      </picker>
    </view>

    <view class="form-item">
      <text class="label">城市</text>
      <picker mode="selector" range="{{cities}}" bindchange="onCityPick">
        <view class="picker-value">{{form.city || '请选择城市'}}</view>
      </picker>
    </view>

    <view class="form-item">
      <text class="label">个性签名</text>
      <textarea class="textarea" value="{{form.signature}}" bindinput="onInput" data-key="signature" placeholder="说点什么..." />
    </view>

    <view class="form-item">
      <text class="label">音乐标签</text>
      <view class="tags-row">
        <view wx:for="{{allTags}}" wx:for-item="tag" wx:for-index="idx" wx:key="*this" class="tag {{form.tags.indexOf(tag) > -1 ? 'active' : ''}}" data-index="{{idx}}" data-tag="{{tag}}" bindtap="onTagToggle">{{tag}}</view>
      </view>
      <view class="selected-row">
        <input class="input" value="{{form.tags.join('，')}}" placeholder="已选标签将显示在此" disabled />
        <view class="chips">
          <view wx:for="{{form.tags}}" wx:key="*this" class="chip" bindlongpress="onChipLongPress" data-tag="{{item}}">
            <text>{{item}}</text>
            <text class="chip-remove" data-tag="{{item}}" bindtap="onTagRemove">×</text>
          </view>
          <input class="tag-input" placeholder="输入自定义标签后回车添加" confirm-type="done" bindinput="onCustomTagInput" bindconfirm="onCustomTagConfirm" value="{{customTagInput}}" />
        </view>
      </view>
    </view>
  </view>

  <view class="actions">
    <button class="save-btn" bindtap="onSave">保存</button>
  </view>
</view>