## 目标

* 参照秀动的风格重构个人信息页：登录引导 → 顶部信息卡 → 设置入口 → 中部网格功能 → 底部关于我们。

* 支持编辑头像、昵称、性别、生日、城市、个性签名、音乐标签；展示年龄、星座、地区等。

* 继续采用云函数与 `users` 集合，补充字段与返回的派生信息。

## 页面结构与交互

### 顶部登录状态

* 进入个人页自动调用云函数 `userGetProfile` 检测是否已登录。

* 未登录：显示一条轻提示 + 按钮 “微信授权登录”，走 `wx.getUserProfile` → 云函数 `userLogin`。

### 顶部信息卡（已登录）

* 头像（圆形）+ 昵称；右侧/下方展示：

  * 年龄（生日推算）、星座（生日推算）、地区（省份/城市）。

* 点击整块进入 “个人信息设置页”。

### 个人信息区域（上部分入口）

* 新增页面 `pages/profile-edit/profile-edit`：表单编辑头像、昵称、性别（单选）、生日（日期选择器）、城市（城市选择器）、个性签名（多行文本）、音乐标签（多选标签）。

* 保存调用云函数 `userUpdateProfile`；成功后返回并刷新个人页。

### 中部网格功能

* 2～3 列网格卡片：

  * 我的发帖、我的收藏、意见反馈、设置、隐私协议（可选）、帮助中心（可选）。

* 每项为图标+文字，点击进入各功能或弹窗提示（迭代中）。

### 底部关于我们

* 独立卡片或文本区域，显示 “滚聚 GunJoy” 品牌文案与版本号，点击进入关于页或弹窗。

## 技术实现（WXML/WXSS/TS）

### 个人页 WXML

* 顶部：`login-tip`（未登录）/ `profile-card`（已登录）。

* 入口：`profile-edit-entry`（箭头）进入设置页。

* 网格：`grid-section`（`grid-item` 组成），统一用 `rpx` 尺寸。

* 尾部：`about-section` 文案。

### 个人页 TS

* `onLoad/onShow` 调用 `userGetProfile`，设置 `isLoggedIn`/`dbUser`。

* 星座计算：前端根据生日计算并展示；年龄后端已计算也可以前端兜底，计算后也允许用户可以修改。

* 点击入口：`goToProfileEdit()`、网格各项跳转或提示。

### 设置页 WXML/TS

* 表单项：头像（上传/更换）、昵称、性别、生日、城市、签名、音乐标签。

* 头像：`wx.chooseImage` → 上传云存储 → 回写 `avatarUrl`。

* 保存：校验后调用 `userUpdateProfile`。

## 云函数与数据库

### 云函数（已接入基础）

* `userLogin`：创建/更新用户（合并昵称/头像等）。

* `userGetProfile`：返回用户对象并附加 `age` 与 `zodiac`（新增返回星座）。

* `userUpdateProfile`：鉴权后更新指定字段。

### 字段扩展

* `users` 集合新增/使用：

  * `signature`: string（个性签名）

  * `tags`: string\[]（音乐标签）

  * `birthday`: string（ISO，计算年龄与星座）

  * `avatarUrl`: string（头像）

  * 其余：`nickname`, `gender`, `city`, `province`, `preferences`, `createdAt`, `updatedAt`

* 索引：`openid` 唯一、`unionid` 普通。

* 返回派生信息：

  * `age`: number | null

  * `zodiac`: string | null（按生日计算：白羊/金牛/...）。

## 星座计算规则

* 按公历生日的月日映射：

  * 牡羊(白羊) 3/21–4/19，金牛 4/20–5/20，双子 5/21–6/21，巨蟹 6/22–7/22，狮子 7/23–8/22，处女 8/23–9/22，天秤 9/23–10/23，天蝎 10/24–11/22，射手 11/23–12/21，摩羯 12/22–1/19，水瓶 1/20–2/18，双鱼 2/19–3/20。

* 后端/前端均可实现，建议后端返回，前端兜底。

## 素材清单（请提供）

* 头像占位：`default-avatar.png`（64×64，≤40KB）

* 顶部信息卡图标：`icon-age.png`、`icon-zodiac.png`、`icon-location.png`（24×24，≤20KB）

* 编辑入口：`icon-edit.png`（24×24）

* 网格功能图标：

  * `icon-posts.png`、`icon-favorites.png`、`icon-feedback.png`、`icon-settings.png`、`icon-help.png`、`icon-about.png`（24–40px，≤40KB/张）

* 箭头：`icon-arrow-right.png`（24×24）

## 交付项（代码变更）

1. 修改 `pages/profile/profile.wxml/wxss/ts`：实现新布局与登录检测、展示信息、网格功能。
2. 新增 `pages/profile-edit/` 页面：表单编辑与保存调用。
3. 更新云函数返回：在 `userGetProfile` 中附加 `zodiac`；`userUpdateProfile` 支持 `signature/tags`。

## 验收标准

* 未登录时显示授权提示；登录后展示头像、昵称、年龄、星座、地区。

* 点击进入设置页，成功编辑资料并保存；返回个人页刷新展示。

* 网格功能可点，进入对应页面或提示。

* 底部关于我们可见；整体样式与秀动风格接近，主题色延续 `#FF6B35`。

请确认方案；收到素材文件名后，我将开始实现并替换图标，确保体积与显示效果合规。
